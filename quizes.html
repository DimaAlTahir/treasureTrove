<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="stylesheet.css">
    <title>Title</title>
    <script defer src="treasureTrove.js"></script>

</head>
<body>

 <div class="container">

     <div id="quizQuestionContainer">
         <h2 id="question">
             loading question...
         </h2>
     </div>

     <div class="answer" id="textboxAnswers">
         <form action="javascript:answerText()">
             <input id="textBox" class="answer" type="text" name="answer">
             <input id="submitBtnText" class="controlbtns" type="submit" value="Submit">
         </form>
      </div>

     <div class="answer" id="numericContainer">
         <form action="javascript:answerNum()">
             <input id="number" class="answer" type="number" name="answer">
             <input id="submitBtnNumeric" class="controlbtns" type="submit" value="Submit">
         </form>
     </div>

     <div class="answer" id="intContainer">
         <form action="javascript:answerInt()">
             <input id="int" class="answer" type="inte" name="answer">
             <input id="submitBtnInt" class="controlbtns" type="submit" value="Submit">
         </form>
     </div>

     <div class="answer" id="booleanContainer">
         <form action="">
             <button id="boolBtnT" class="controlbtns" value="True" onclick="javascript:trueAns()">True</button>
             <button id="boolBtnF" class="controlbtns" value="False" onclick="javascript:falseAns()">False</button>
         </form>
     </div>

 </div>

     <form  action="javascript:skipQuestion()">
         <input class="controlbtns"  id="skip" type="submit" value="Skip" />
     </form>

<script>

    const params = new URLSearchParams(location.search);
    let playerName = params.get("name");
    let uuid = params.get("treasure-hunt-id");
    console.log(uuid);

    // function getStartApi() {
    //     fetch("https://codecyprus.org/th/api/start?" + playerName + "&app=Team5" + uui
    // }

    // {
    //     "session": "ag9nfmNvZGVjeXBydXNvcmdyFAsSB1Nlc3Npb24YgICA3JfiuQsM",
    //     "numOfQuestions": 6,
    //     "status": "OK"
    // }


    //functions to find device location
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        }
        else {
            alert("Geolocation is not supported by your browser.");
        }
    }
    function showPosition(position) {
        alert("Latitude: " + position.coords.latitude + ", Longitude: " + position.coords.longitude);
    }

    //function to skip questions
    function skipQuestion() {
        fetch("https://codecyprus.org/th/api/question")
            .then(response => response.json())
            .then(jsonObject => {
                let current = jsonObject.currentQuestionIndex;
                for (let i = 0; i < treasureHuntsArray.length; i++) {
                    if (numOfQuestions[i] === current) {
                        continue;
                    }
                }
            });
    }

    //function that writes question then decides the way 2 answer
    function displayQuestionReply(){
        document.getElementsById(question).innerHTML=json.questionText;
        if (json.questionType==='BOOLEAN'){
            document.getElementById(submitBtn).style.display='none';
            document.getElementById(boolBtnT).style.display='grid';
            document.getElementById(boolBtnF).style.display='grid';
        }
        else if (json.questionType==='TEXT'){
            document.getElementById(submitBtn).style.display='grid';
            document.getElementById(boolBtnT).style.display='none';
            document.getElementById(boolBtnF).style.display='none';
        }
        else if (json.questionType==='INTEGER'){
            document.getElementById(submitBtnInt).style.display='grid';
            document.getElementById(submitBtn).style.display='none';
            document.getElementById(boolBtnT).style.display='none';
            document.getElementById(boolBtnF).style.display='none';
        }
        else if (json.questionType==='NUMERIC'){
            document.getElementById(submitBtnNumeric).style.display='grid';
            document.getElementById(submitBtnInt).style.display='none';
            document.getElementById(submitBtn).style.display='none';
            document.getElementById(boolBtnT).style.display='none';
            document.getElementById(boolBtnF).style.display='none';
        }
        else{
            document.getElementById(submitBtnNumeric).style.display='none';
            document.getElementById(submitBtnInt).style.display='none';
            document.getElementById(submitBtn).style.display='none';
            document.getElementById(boolBtnT).style.display='none';
            document.getElementById(boolBtnF).style.display='none';
        }

    }

    function answerText(){
        let a=document.getElementById("textBox").value;
        loadAns(a);
    }

    function answerNum(){
        let a=document.getElementById("number").value;
        loadAns(a);
    }

    function answerInt(){
        let a=document.getElementById("int").value;
        loadAns(a);
    }

    function trueAns(){
        loadAns('true');
    }
    function falseAns(){
        loadAns('false');
    }

    function loadAns(a){
        console.debug("submitted: "+a)
        //todo send answer 2 server by api
    }


</script>




</body>
</html>